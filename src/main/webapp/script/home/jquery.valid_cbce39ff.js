!function($,window,undefined){var list,ns,cache,nsname,LTJQ;$.noop=$.noop||function(){},list={},ns="valid",cache={},nsname="lt-plugins-"+ns.toLowerCase(),LTJQ=function(e){var a,t,s;if("string"==typeof e)return a=[],t=arguments,this.each(function(){var e=$(this).attr(nsname);e&&list[e]&&a.push(list[e]._api.apply(list[e],t))}),a.length>0?a[0]:null;e=e||{};for(s in LTJQ.defaults)e[s]===undefined&&(e[s]=LTJQ.defaults[s]);return this.each(function(){var a=Math.random();!$(this).attr(nsname)&&$(this).attr(nsname,a)&&(list[a]=new LTJQ.fn._init(this,a,e))})},LTJQ.fn=LTJQ.prototype={version:"1.0.0",_init:function(e,a,t){var s=this;return s.element=e,s.id=a,s.config=t,s.__init.call(s),t.init&&t.init.call(s),s},_api:function(){var e,a=this,t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);return 0===t.length||a[t[0]]===undefined?a:"function"==typeof a[t[0]]?a[t[0]].apply(a,t.slice(1)):a},__init:function(){var e=this,a=$(e.element),t=a;return a.is("[validate-rules]")||(a=a.find("[validate-rules]")),e.config.type&&e.config.type.callback&&a.each(function(){var a=$(this),t=a.attr("validate-type");t||(t=e.config.type.name),t&&a.bind(t+"."+ns,function(){e.config.type.callback&&e.config.type.callback.call(a,e.validate(a)[0])})}),t.is("form")&&t.bind("submit",function(a){return e.scan().valid&&e.config.success&&("function"!=typeof e.config.success||e.config.success.call(t))?void 0:(a.preventDefault(),!1)}),e},_extendGetter:function(e){var a={};return Object.keys(e).forEach(function(t){a[t]={},Array.isArray(e[t])&&e[t].length>0?(a[t].rule=e[t][0],a[t].message=null,e[t].length>1&&"string"==typeof e[t][1]&&(a[t].message=e[t][1])):(a[t].rule=e[t],a[t].message=null)}),e=a},_ruleCompile:function(e,a,t){var s,n,r,i,l,d,c,m,g,o,u,f,p,x,h,v,y,b,k,E=this,M=$(e).val();if($(e).prop("disabled"))return!1;for(a=a||[],"string"==typeof a&&(a=[a]),s=0;s<a.length;s++){switch(n=a[s],r={name:"",extend:null,message:""},"string"==typeof n?r.name=n:"[object Array]"===Object.prototype.toString.call(n)&&(r.name=n[0],2===n.length?"object"==typeof n[1]?r.extend=n[1]:"string"==typeof n[1]&&(r.message=n[1]):3===n.length&&(r.extend=n[1],r.message=n[2])),r.name){case"required":"select"===e.tagName.toLowerCase()?(r.message=r.message||"请选择$！",r.extend=$.extend({ruleout:""},r.extend),(-1===e.selectedIndex||M===r.extend.ruleout)&&(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name))):"checkbox"===$(e).attr("validate-group")?(i=$(e).attr("validate-name"),l=$(e).closest("form"),d=i?l.length>0?l.find(":checkbox[name='"+i+"']:checked"):$(":checkbox[name='"+i+"']:checked"):$(e).find(":checkbox:checked"),r.extend=$.extend({min:1},r.extend),"undefined"!=typeof r.extend.min&&d.length<r.extend.min?(r.message=r.message||"$1$2选择$3项！",t.valid=!1,t.customErrorMsg=r.message.replace(/\$1/g,t.name).replace(/\$2/g,"至少").replace(/\$3/g,r.extend.min).replace(/\$/g,t.name)):"undefined"!=typeof r.extend.max&&d.length>r.extend.max&&(r.message=r.message||"$1$2选择$3项！",t.valid=!1,t.customErrorMsg=r.message.replace(/\$1/g,t.name).replace(/\$2/g,"最多").replace(/\$3/g,r.extend.max).replace(/\$/g,t.name))):"radio"===$(e).attr("validate-group")?(c=$(e).attr("validate-name"),l=$(e).closest("form"),m=c?l.length>0?l.find(":radio[name='"+c+"']:checked"):$(":radio[name='"+c+"']:checked"):$(e).find(":radio:checked"),r.message=r.message||"请选择$！",r.extend=$.extend({min:1},r.extend),0===m.length&&(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name))):(r.message=r.message||"$不能为空！",/^\s*$/.test(M)&&(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name)));break;case"number":if(r.extend=$.extend({"float":!1},r.extend),r.extend=E._extendGetter(r.extend),""!==M){if(r.extend["float"]){if(r.extend["float"].rule&&!/^\d+(\.\d+)?$/.test(M)){t.valid=!1,t.customErrorMsg=(r.extend["float"].message||r.message||"$必须是数字！").replace(/\$/g,t.name);break}if(!r.extend["float"].rule&&!/^\d+$/.test(M)){t.valid=!1,t.customErrorMsg=(r.extend["float"].message||r.message||"$必须是数字！").replace(/\$/g,t.name);break}}if(r.extend.max&&M>r.extend.max.rule){t.valid=!1,t.customErrorMsg=(r.extend.max.message||r.message||"$1不能大于$2！").replace(/\$2/g,r.extend.max.rule).replace(/\$1?/g,t.name);break}if(r.extend.min&&M<r.extend.min.rule){t.valid=!1,t.customErrorMsg=(r.extend.min.message||r.message||"$1不能小于$2！").replace(/\$2/g,r.extend.min.rule).replace(/\$1?/g,t.name);break}}break;case"mobile":r.message=r.message||"$输入不正确！",""===M||/^((\(\d{2,3}\))|(\d{3}\-))?(1[34578]\d{9})$/.test(M)||(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name));break;case"phone":r.message=r.message||"$输入不正确！",g=/((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)/,""===M||g.test(M)||(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name));break;case"email":r.message=r.message||"$格式输入不正确！",""===M||/^[A-Z_a-z0-9-\.]+@([A-Z_a-z0-9-]+\.)+[a-z0-9A-Z]{2,4}$/.test(M)||(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name));break;case"url":r.message=r.message||"$格式输入不正确！",""===M||/^(http:|ftp:)\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"])*$/.test(M)||(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name));break;case"length":if(r.extend=$.extend({},r.extend),r.message=r.message||"$1长度不能$2$3个字符！",""!==M){if("undefined"!=typeof r.extend.min&&M.length<r.extend.min){t.valid=!1,t.customErrorMsg=r.message.replace(/\$2/g,"小于").replace(/\$3/g,r.extend.min).replace(/\$1?/g,t.name);break}if("undefined"!=typeof r.extend.max&&M.length>r.extend.max){t.valid=!1,t.customErrorMsg=r.message.replace(/\$2/g,"大于").replace(/\$3/g,r.extend.max).replace(/\$1?/g,t.name);break}}break;case"reallength":if(r.extend=$.extend({},r.extend),r.message=r.message||"$1长度不能$2$3个字符！",""!==M){if("undefined"!=typeof r.extend.min&&M.replace(/[\u4e00-\u9fa5]/g,"**").length<r.extend.min){t.valid=!1,t.customErrorMsg=r.message.replace(/\$2/g,"小于").replace(/\$3/g,r.extend.min).replace(/\$1?/g,t.name);break}if("undefined"!=typeof r.extend.max&&M.replace(/[\u4e00-\u9fa5]/g,"**").length>r.extend.max){t.valid=!1,t.customErrorMsg=r.message.replace(/\$2/g,"大于").replace(/\$3/g,r.extend.max).replace(/\$1?/g,t.name);break}}break;case"cn":r.message=r.message||"$应当由汉字组成！",""===M||/^[\u4e00-\u9fa5]+$/.test(M)||(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name));break;case"repeat":if(r.extend=$.extend({max:5},r.extend),r.message=r.message||"$1不能重复输入$2次以上！",""!==M&&(g=new RegExp("(\\S)\\1{"+r.extend.max+",}.*","g"),g.test(M))){t.valid=!1,t.customErrorMsg=r.message.replace(/\$2/g,r.extend.max).replace(/\$1?/g,t.name);break}break;case"not":if(r.extend=$.extend({},r.extend),r.message=r.message||"$输入不正确！",""!==M&&r.extend.type&&(-1!==r.extend.type.indexOf("email")&&/[A-Z_a-z0-9-\.]+@([A-Z_a-z0-9-]+\.)+[a-z0-9A-Z]{2,4}/.test(M)||-1!==r.extend.type.indexOf("mobile")&&/((\(\d{2,3}\))|(\d{3}\-))?(1[34578]\d{9})/.test(M))){t.valid=!1,t.customErrorMsg=r.message.replace(/\$1?/g,t.name);break}break;case"trim":""!==M&&(M=M.replace(/^\s+|\s+$/g,""),$(e).val(M));break;case"parseAnsi":""!==M&&$(e).val(M.replace(/[\uf06c\uf06e\uf075\uf0fc\uf0d8\uf0b2]\t?/g,"· "));break;case"pattern":"string"==typeof r.extend&&(r.extend=new RegExp(r.extend,"ig")),r.message=r.message||"$不符合规范！",""===M||r.extend.test(M)||(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name));break;case"ajax":o=E.config.ajax,u=!0,o&&"object"==typeof o[r.extend]&&(f=o[r.extend].success,p={type:"post",cache:!1,async:!1},x="",$.extend(p,o[r.extend]),o[r.extend].success&&(p.success=function(e){u=o[r.extend].success(e)}),o[r.extend].data&&"function"==typeof p.data&&(p.data=p.data()),x=$.param(p.data),cache[p.url]&&cache[p.url].data===x?u=cache[p.url].status:($.ajax(p),cache[p.url]={data:x,status:u}),u||(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name)));break;case"repassword":h=$(e).closest("form").find("input:password"),v=h.not(":last").filter(":last"),r.message=r.message||"两次输入的密码不一致！",""!==M&&1===v.length&&v.val()!==M&&(t.valid=!1,t.customErrorMsg=r.message.replace(/\$2/g,v.attr("validate-title")||"").replace(/\$1/g,t.name));break;case"idcard":r.message=r.message||"$填写不正确！",""===M||/^\d{17}[xX\d]$|^\d{15}$/.test(M)||(t.valid=!1,t.customErrorMsg=r.message.replace(/\$/g,t.name));break;case"dynrule":y=E.config.dynrule,y&&"function"==typeof y[r.message]&&E._ruleCompile(e,y[r.message].call(e),t);break;case"dyncheck":b=E.config.dyncheck,b&&"function"==typeof b[r.message]&&(k=b[r.message].call(e),k&&k.customErrorMsg&&(k.customErrorMsg=k.customErrorMsg.replace(/\$/g,t.name)),$.extend(t,k))}if(!t.valid)break}},validate:function(_element){var that=this,$element=_element||$(that.element),elements=new Array;return $element.is("[validate-rules]")||($element=$element.find("[validate-rules]")),$element.each(function(){var validity={element:$(this),name:$(this).attr("validate-title")||"该字段",valid:!0,customErrorMsg:""},rules=new Array;try{rules=eval($(this).attr("validate-rules")||[])}catch(e){}that._ruleCompile(this,rules,validity),$(this).attr("data-valid",validity.valid).data("validity",validity),elements.push(validity)}),elements},scan:function(){var e,a=this,t=$(a.element),s=a.validate(),n={valid:!0};for(e=0;e<s.length;e++)if(!s[e].valid){n.firstError=s[e],n.valid=!1;break}return n.result=s,a.config.scan&&a.config.scan.call(t,n),n},option:function(){var e=this;return 0===arguments.length?e.config:1===arguments.length?e.config[arguments[0]]:(e.config[arguments[0]]=arguments[1],e)},destroy:function(){var e=this;delete list[e.id]}},LTJQ.fn._init.prototype=LTJQ.fn,LTJQ.defaults={scan:$.noop,success:!1},$.fn[ns]=$.fn[ns]||function(){return LTJQ.apply(this,arguments)}}(window.jQuery,window);